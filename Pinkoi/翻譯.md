[GitHub README](https://github.com/pinkoi-inc/App-Automation/blob/develop/Documentation/example/update-l10n-to-your-remote-branch.md)

# 新增翻譯

### Step1: `make extract-intl`

對於後端而言，在 `.py` 或 `.mako` 中新增或修改任何 `_("...")` 程式碼，就須要在專案根目錄執行 `make extract-intl`，這個步驟是在建 key，所以完成後會看到一些 `.pot` 檔被改動。

*這個步驟大概會花 4-5 分鐘 。*

>[!Note]
>若擔心自己的翻譯蓋掉別人的，可以選擇不使用指來新增 key，改為手動新增（新增到 locale/pinkoi.pot）

### Step2~7

![[add_translation_workflow_crowdin.png]]

### Step8: 將最新的 feature branch pull 至 local

```bash
git pull origin <feature-branch-name>
```

此時會多一些 `.po` 檔。

### Step9: `make tunnel`

### Step10: `make compile-intl`

此步驟的目的是為了上線前的檢查 ([[#Step12 上線前檢查 local 各語言是否皆正常顯示|Step12]]) 做準備，在 local 將翻譯好的內容寫進 `.po` 檔，因此執行完後會看到一些 `.po` 檔被改動，==但是這些 `.po` 檔不用 commit！== 。

*這個步驟大概會花 2-3 分鐘 。*

### Step11: 重啟 local server

```bash
make local-down
make local-up
```

### Step12: 上線前檢查 local 各語言是否皆正常顯示

### Step13: 進入[[發車 & Revert]]的流程

# 修改翻譯

![[update_traslation_workflow_crowdin.png]]

# 當翻譯導致 Branch 與 dev 出現 Conflict 時

### 先在 Local 做以下動作

```bash
git checkout dev
git pull origin dev

git checkout <feature_branch>
git checkout dev locale
git commit -m "..."

git pull origin dev  # merge branch

make extract-intl
git add .
git commit -m "..."
git push origin <feature_branch>
```

### 再於 GitHub 做以下動作

- Run crowdin workflow
- Merge feature branch to dev
