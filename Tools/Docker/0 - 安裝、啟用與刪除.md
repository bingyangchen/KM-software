# On Ubuntu

ğŸ“„ [å®˜æ–¹æ–‡ä»¶](https://docs.docker.com/engine/install/ubuntu/)

>[!Note]
>ä¸‹æ–¹ç‚ºå®˜æ–¹æ–‡ä»¶çš„æ‘˜è¦ï¼Œå¯¦éš›æŒ‡ä»¤å»ºè­°ç›´æ¥çœ‹æœ€æ–°çš„å®˜æ–¹æ–‡ä»¶ã€‚

### å®‰è£ Docker Engine

##### Step1: ç§»é™¤éå®˜æ–¹çš„ã€èˆŠç‰ˆçš„ Docker packages

```bash
for pkg in docker.io docker-doc docker-compose docker-compose-v2 podman-docker; do sudo apt-get remove $pkg; done
```

ç•¶ç„¶å¦‚æœé€™æ˜¯ä½ ç¬¬ä¸€æ¬¡å®‰è£ Dockerï¼Œå¾ˆæœ‰å¯èƒ½ä½ çš„é›»è…¦æœ¬ä¾†å°±æ²’æœ‰å®‰è£ä¸Šè¿°é€™äº› packagesã€‚

##### Step2: ç§»é™¤ containerd èˆ‡ runc

```bash
for pkg in containerd runc; do sudo apt-get remove $pkg; done
```

>[!Note]
>é—œæ–¼ Docker Engineã€containerd èˆ‡ runc ä¹‹é–“çš„é—œä¿‚ï¼Œè«‹è¦‹ [[Tools/Docker/1 - Introduction|æœ¬æ–‡]]ã€‚

##### Step3: Set up Docker's `apt` repository

```bash
# Add Docker's official GPG key:
sudo apt-get update
sudo apt-get install ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc

# Add the repository to Apt sources:
echo \
    "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
    $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
    sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update
```

##### Step4: å®‰è£æœ€æ–°ç‰ˆæœ¬çš„ Docker packages

```bash
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

Done! å®‰è£æˆåŠŸå¾Œï¼ŒDocker daemon æœƒè‡ªå‹•å•Ÿå‹•ï¼Œä¸é ˆè¦æ‰‹å‹•å•Ÿå‹•ã€‚

### ç¢ºèªæ˜¯å¦å®‰è£æˆåŠŸ

```bash
# Check the version
docker --version  # or `docker version` for detailed info

# Download and run the "hello-world" image for testing
sudo docker run hello-world
```

è‹¥å®‰è£æˆåŠŸï¼Œé‹è¡Œé€™å€‹ container å¾Œæœƒå°å‡ºä¸€äº›ç¢ºèªè¨Šæ¯ã€‚

### å•Ÿå‹• Docker Daemon

å®‰è£æˆåŠŸå¾Œï¼ŒDocker daemon æœƒè‡ªå‹•å•Ÿå‹•ï¼Œä¸é ˆè¦æ‰‹å‹•å•Ÿå‹•ï¼Œä½†è‹¥æ‰‹å‹•åœæ­¢ Docker daemon å¾Œè¦å†æ¬¡å•Ÿå‹•å°±é ˆè¦ä½¿ç”¨é€™å€‹æŒ‡ä»¤ï¼š

```bash
sudo systemctl start docker
```

### åœæ­¢ Docker Daemon

```bash
sudo systemctl stop docker
```

### åˆªé™¤ Docker

##### Step1: åˆªé™¤ç›¸é—œå¥—ä»¶

```bash
sudo apt-get purge docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras
```

##### Step2: åˆªé™¤ç›¸é—œæª”æ¡ˆèˆ‡ç›®éŒ„

åŒ…å« imagesã€containersã€volumesï¼Œä»¥åŠä¸€äº› custom configuration filesï¼š

```bash
sudo rm -rf /var/lib/docker
sudo rm -rf /var/lib/containerd
```

# On MacOS

### å®‰è£ Docker Desktop

è‡³[å®˜æ–¹ç¶²ç«™](https://docs.docker.com/desktop/install/mac-install/)ä¸‹è¼‰ï¼Œé€é GUI å®‰è£ã€‚

### å•Ÿå‹• Docker Daemon

é€é GUI æˆ–ä½¿ç”¨ä¸‹æ–¹æŒ‡ä»¤æ‰“é–‹ Docker Desktop æ‡‰ç”¨ç¨‹å¼ï¼š

```bash
open -a "Docker Desktop"
```

### åœæ­¢ Docker Daemon

```bash
osascript -e 'quit app "Docker Desktop"'
```

### åˆªé™¤ Docker Desktop

##### Step1: åˆªé™¤æ‡‰ç”¨ç¨‹å¼

```bash
/Applications/Docker.app/Contents/MacOS/uninstall
```

##### Step2: åˆªé™¤ç›¸é—œæª”æ¡ˆèˆ‡ç›®éŒ„

```bash
rm -rf ~/Library/Group\ Containers/group.com.docker
rm -rf ~/Library/Containers/com.docker.docker
rm -rf ~/.docker
```
